### **Monotonic Stack vs. Monotonic Queue: Exact Differences with Processing Direction**

| **Aspect**               | **Monotonic Stack**                                                                                                                                                                                                                                  | **Monotonic Queue**                                                                                                                                                                                       |
| ------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Definition**           | A **stack** that maintains elements in **monotonic order** (increasing or decreasing).                                                                                                                                                               | A **double-ended queue (deque)** that maintains elements in **monotonic order** (increasing or decreasing).                                                                                               |
| **Usage**                | Used for **next greater, next smaller, and range-based problems** (e.g., histograms, stock span).                                                                                                                                                    | Used for **sliding window minimum/maximum, range queries** where a window moves across elements.                                                                                                          |
| **Order Maintained**     | **Monotonic Increasing Stack** → Stores elements in **increasing order** (smallest at the bottom, largest at the top).<br><br>**Monotonic Decreasing Stack** → Stores elements in **decreasing order** (largest at the bottom, smallest at the top). | **Monotonic Increasing Queue** → Stores elements in **increasing order** (smallest at the front).**Monotonic <br><br>Decreasing Queue** → Stores elements in **decreasing order** (largest at the front). |
| **Operations**           | - **Push elements while maintaining order.**<br><br>- **Pop elements when processing new elements (used for Next Greater/Smaller).**                                                                                                                 | - **Push elements while maintaining order.**<br><br>- **Remove front elements when they go out of the window.**                                                                                           |
| **Main Use Case**        | **Range queries** where **we need to check previous or next elements** efficiently. <br>✅ Next Greater Element (NGE)<br>✅ Next Smaller Element <br>✅ Largest Rectangle in Histogram <br>✅ Stock Span Problem <br>✅ Trapping Rain Water               | **Sliding window problems** where **we need to maintain min/max over a range**. <br>✅ Sliding Window Maximum <br>✅ Sliding Window Minimum <br>✅ Sum of Min & Max in all subarrays                         |
| **Processing Direction** | **Backward Processing (Right to Left)** → <br>Used for **Next Greater Element (NGE) and Next Smaller Element (NSE)**<br><br>**Forward Processing (Left to Right)** → <br>Used for **Previous Greater/Smaller Element**.                              | **Forward Processing (Left to Right Only)** → The window moves sequentially across elements, so processing happens in **one direction**.                                                                  |
| **Data Structure Used**  | **Stack (LIFO: Last In, First Out)**                                                                                                                                                                                                                 | **Deque (Double-ended Queue, FIFO-like behavior)**                                                                                                                                                        |
| **Element Removal**      | Elements are removed **when processing the next element** (popping from the stack).                                                                                                                                                                  | Elements are removed **when they go out of the sliding window** (popping from the front of the deque).                                                                                                    |
| **Complexity**           | **O(n)** – Each element is pushed and popped at most once.                                                                                                                                                                                           | **O(n)** – Each element is pushed and popped at most once.                                                                                                                                                |
| **Best Suited For**      | Problems involving **next greater, next smaller**, or **range-based** computations where we process elements **one at a time in one direction**.                                                                                                     | Problems involving **dynamic range queries** where we need **real-time updates** over a sliding window.                                                                                                   |
